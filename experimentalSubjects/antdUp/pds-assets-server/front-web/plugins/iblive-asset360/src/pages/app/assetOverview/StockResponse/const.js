import { Button, Rate } from 'antd';
import styles from './index.less';

const getColor = (status) => {
  switch (status) {
    case '1':
      return 'var(--normal-color)';
    case '2':
      return 'var(--primary-color)';
    case '3':
      return 'var(--success-color)';
    default:
      return 'var(--normal-color)';
  }
};

const getStatusName = (status) => {
  switch (status) {
    case '1':
      return '研究中';
    case '2':
      return '已回复';
    case '3':
      return '已点评';
    default:
      return '-';
  }
};

export const getColumns = (handleView) => [
  {
    title: '序号',
    dataIndex: 'index',
    width: 60,
    render: (_text, _record, index) => index + 1,
  },
  {
    title: '股票代码/名称',
    dataIndex: 'secCode',
    render: (text, record) => {
      return <div>{`${text}/${record.secName}`}</div>;
    },
  },
  {
    title: '问题',
    dataIndex: 'questionContent',
    render: (text) => {
      return (
        <div>
          {(text || '').split('？').map((item, index) => {
            return item ? <div key={index}>{item}？</div> : <></>;
          })}
        </div>
      );
    },
  },
  {
    title: '回复',
    dataIndex: 'simpleAnswerContent',
  },
  {
    title: '回复人',
    dataIndex: 'answerUser',
    render: (text, record) => {
      return (
        <div>
          <div>{text}</div>
          <div style={{ color: 'var(--text-color-secondary)' }}>
            {record.answerTime}
          </div>
        </div>
      );
    },
  },
  {
    title: '状态',
    dataIndex: 'status',
    render: (e) => {
      <div>
        <div
          style={{ background: getColor(e) }}
          className={styles.circleIcon}
        ></div>
        {getStatusName(e)}
      </div>;
    },
  },
  {
    title: '点评',
    dataIndex: 'simpleCommentContent',
    render: (text, record) => {
      return (
        <div>
          {text && (
            <>
              <Rate
                disabled
                style={{ fontSize: 14 }}
                allowHalf
                defaultValue={record.score}
              />
              <div>{text}</div>
            </>
          )}
          {!text && <div>{''}</div>}
        </div>
      );
    },
  },
  {
    title: '点评人',
    dataIndex: 'commentUser',
    render: (text, record) => {
      return (
        <div>
          <div>{text}</div>
          <div style={{ color: 'var(--text-color-secondary)' }}>
            {record.commentTime}
          </div>
        </div>
      );
    },
  },
  {
    title: '操作',
    dataIndex: 'action',
    fixed: 'right',
    render: (_text, record) => {
      return (
        <div>
          {!record.answerId && (
            <>
              <Button onClick={() => handleView(record)} type="link">
                查看
              </Button>
            </>
          )}
        </div>
      );
    },
  },
];

export const mockDataSource = [
  // typeList: [{ value: '1', label: '基本面' }],
  // responseList: [
  //   {
  //     createTime: '2025-06-17 10:00:00',
  //     content: 'xxxxxxxxxxxxxxxxxxx',
  //     creator: '领导A',
  //     comment: '不错不错',
  //     stars: 4,
  //     startsTime: '2025-06-17 12:00:00',
  //     fullContent:
  //       '这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容',
  //   },
  // ],

  // createTime: '2025-06-17 08:00:00',
  // creator: '领导A',
  // common: '报告从市场潜力、增长驱动力...',
  {
    description:
      '公司产品或服务是否具有充分的市场潜力？未来3-5年能否实现营收大幅增长？',
    direction: '研发投入与创新持续性',
    id: 1,
    code: '000001',
    name: '平安银行',
    question: '平安银行怎么样？你是谁？啊啊啊？',
    statusName: '研究中',
    creator: '领导A',
    responseList: [
      {
        createTime: '2025-06-17 10:00:00',
        content: 'xxxxxxxxxxxxxxxxxxx',
        creator: '领导A',
        comment: '不错不错',
        stars: 4,
        startsTime: '2025-06-17 12:00:00',
        fullContent:
          '这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容',
      },
    ],
    response: '平安银行是一家不错的银行，但是最近不太好',
    responseTime: '2025-06-17 12:00:00',
    responseUser: '张三',
    status: '1',
    typeList: [{ value: '1', label: '基本面' }],
    stars: 4,
    createTime: '2025-06-17 12:00:00',
    fullContent:
      '这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容这里是完整内容',
    comment: '不错不错',
    commentTime: '2025-06-17 12:00:00',
    commentUser: '张三',
  },
];

export const mockQuestionList = [
  {
    questionId: 8,
    interCode: '000001.XSHE',
    secCode: '000001',
    secName: '平安银行',
    questionContent: '滔之一问3',
    answerDirection: null,
    questionUser: 'admin',
    questionTime: '2025-06-20 11:18:16',
    tag: '行业问题',
    status: '1',
    answerList: [],
  },
  {
    questionId: 7,
    interCode: '000001.XSHE',
    secCode: '000001',
    secName: '平安银行',
    questionContent: '滔之一问2',
    answerDirection: null,
    questionUser: 'admin',
    questionTime: '2025-06-20 11:16:31',
    tag: '行业问题',
    status: '1',
    answerList: [
      {
        answerId: 1,
        answerContent:
          '中国长城（000066）的产品与服务在信创政策驱动下具备显著市场潜力，且研发投入与创新持续性为其未来增长提供了重要支撑。以下从技术布局、市场机遇、财务表现及风险因素四个维度展开分析：\r\n\r\n ### 一、技术布局：全栈自主化能力与AI算力突破\r\n作为中国电子旗下核心企业，中国长城构建了从芯片、整机到系统的**全栈自主化能力**，深度参与国家“PKS”自主计算体系建设。其自主安全计算机、服务器等产品已在党政、金融、能源等关键行业实现规模化应用，2021年网信整机市场占有率达28%，年出货量超百万台。在AI算力领域，公司推出基于飞腾5000C芯片和国产GPU的**4U8卡AI服务器**，并与麒麟智算操作系统适配，实现大模型训推一体，成本降低60%。2024年9月发布的长城AIGC一体机支持70B-180B开源模型微调，已在金融、政务等垂直领域落地。此外，公司打造的国产化智算中心解决方案可满足OCR、视频处理等AI应用需求，国产化率超90%。\r\n\r\n研发投入方面，近五年累计研发投入超60亿元，2024年Q3研发费用率达12.5%。尽管短期利润承压（2024年归母净利润-14.79亿元），但公司持续加码AI、GPU等前沿领域，技术转化效率逐步提升。例如，飞腾5000C芯片性能较前代提升一倍，能耗降低8%，支撑新一代擎天V5系列服务器落地。\r\n\r\n### 二、市场机遇：信创加速与新兴业务拓展\r\n1. **信创政策红利**：2025年国产化替代进入加速期，党政、金融等关键行业采购需求释放。中国长城作为信创主力军，已入围多家政策性银行信创终端采购项目，并中标某大型企业IT硬件集中采购项目。分析师预测，2025-2027年公司营收将以10%-15%的复合增速增长，2027年营收预计达198.73亿元。\r\n2. **新兴业务突破**：在海洋信息化领域，公司光纤水听器等水下探测技术取得订单突破；特种计算业务拓展至民航电子政务系统，2024年上半年系统装备业务收入同比增长显著。此外，消费终端与戴尔、惠普等国际品牌深度合作，2024年上半年ODM业务收入占比提升至39.7%。\r\n3. **行业渗透率提升**：当前信创PC渗透率不足20%，而中国长城凭借“可用+好用”的产品体验（如十秒开机、算力媲美主流商用电脑），有望进一步抢占市场份额。\r\n\r\n### 三、财务表现：短期承压与长期改善\r\n2024年公司营收142.03亿元（+5.83%），净利润亏损主要受研发投入增加（同比+27%）和市场竞争加剧影响。但2025年一季度营收同比增长7.32%，净利润减亏至-1.60亿元，显示经营边际改善。机构预测，随着信创订单放量和AI算力产品商业化，2026年净利润有望转正至4.01亿元。毛利率方面，公司通过产品结构优化（如高毛利AI服务器占比提升），预计2025年毛利率将从15.35%提升至17.5%。\r\n\r\n### 四、风险与挑战\r\n1. **技术同质化竞争**：华为、浪潮等巨头主导信创生态，中国长城需提升芯片自主化率（当前依赖飞腾）以突破技术壁垒。\r\n2. **研发转化效率**：尽管研发投入高企，但2024年净利润仍为负，需加快AI、GPU等领域技术落地以实现盈利平衡。\r\n3. **政策依赖风险**：党政订单占比过高（2024年计算产业收入占比77%），若信创采购节奏不及预期，可能影响短期业绩。\r\n\r\n### 结论\r\n中国长城的产品与服务在信创政策驱动下具备明确市场潜力，研发投入与创新持续性为其提供了长期增长动能。未来3-5年，随着信创订单放量、AI算力产品商业化及新兴业务拓展，公司营收有望实现年均10%-15%的增长，2027年营收或突破200亿元。但需关注技术转化效率提升和市场竞争加剧带来的风险。总体而言，公司作为“自主算力国家队”，在国家战略支持下，具备实现营收大幅增长的潜力。',
        simpleAnswerContent: '中国长城（000066）的产品与服务在信...',
        answerUser: 'weijun',
        answerTime: '2025-06-19 16:56:54',
        score: 4,
        commentContent:
          '### 对中国长城（000066）分析内容的点评\r\n\r\n\r\n#### **一、优点分析**\r\n1. **结构清晰，逻辑完整**  \r\n   分析从技术布局、市场机遇、财务表现、风险因素四个维度展开，形成“优势-机遇-挑战”的闭环逻辑，符合行业分析的标准框架，便于读者系统理解企业基本面。\r\n\r\n2. **数据支撑充分，时效性较强**  \r\n   引用了2024年财务数据、市场占有率（如信创PC 28%份额）、订单中标案例等具体信息，且提及2025年信创政策趋势，数据颗粒度较细，增强了结论的可信度。\r\n\r\n3. **技术细节与业务场景结合**  \r\n   不仅罗列技术成果（如飞腾5000C芯片、AI服务器），还阐述了技术在金融、政务等场景的落地情况，体现了“技术-产品-市场”的转化链条，符合投资者对商业化能力的关注。\r\n\r\n4. **风险提示客观全面**  \r\n   指出技术同质化、研发转化效率、政策依赖等潜在问题，避免了分析的片面性，展现了对行业竞争格局和企业经营风险的深度思考。\r\n\r\n\r\n#### **二、可优化方向**\r\n1. **财务分析深度不足**  \r\n   - 仅提及净利润亏损和毛利率预测，未深入分析现金流结构（如经营活动现金流是否健康）、资产负债率（2024年Q3为73.8%）等关键财务指标，可能影响对企业短期偿债能力和持续经营能力的判断。  \r\n   - 研发投入与专利成果的关联性较弱，可补充近三年专利申请数量、核心技术专利占比等数据，增强对“研发持续性”的说服力。\r\n\r\n2. **行业竞争格局对比缺失**  \r\n   提到华为、浪潮等竞争对手，但未对比中国长城与同行在技术路线（如芯片架构）、市场份额、研发投入强度（如华为2024年研发费用率约25%）等方面的差异，难以凸显企业的行业地位和竞争优势。\r\n\r\n3. **信创政策落地节奏细化不足**  \r\n   虽提及“2025年信创加速”，但未说明具体政策细则（如党政/金融行业替代时间表、采购预算规模），建议结合《“十四五”信息化和工业化深度融合发展规划》等文件，量化政策对企业营收的拉动预期。\r\n\r\n4. **新兴业务前景量化不足**  \r\n   海洋信息化、特种计算等新兴业务仅提及“订单突破”，缺乏收入占比、增长率、毛利率等关键数据，难以评估其对企业未来营收的贡献权重。\r\n\r\n\r\n#### **三、总结建议**\r\n整体分析框架完整，数据支撑扎实，适合作为企业基本面的初步研究材料。若需进一步提升分析深度，可：  \r\n1. 补充财务指标的纵向对比（如近三年营收/利润增速、现金流变化）和横向行业对比；  \r\n2. 细化技术路线与竞争对手的差异化分析，突出核心技术壁垒；  \r\n3. 结合政策文件和行业报告，量化市场机遇的规模及企业的份额预期；  \r\n4. 对新兴业务进行单独的财务建模，评估其增长潜力。  \r\n\r\n通过以上优化，可使分析从“现象描述”升级为“价值预测”，更精准地判断企业未来3-5年的营收增长逻辑。',
        simpleCommentContent: '### 对中国长城（000066）分析内...',
        commentUser: 'weijun',
        commentTime: '2025-06-19 17:01:48',
        status: '3',
      },
      {
        answerId: 2,
        answerContent:
          '中国长城（000066）作为信创领域核心企业，其产品与服务的市场潜力及未来增长动能可从研发投入强度、技术转化效率、政策红利释放三方面深度剖析，结合最新财务数据与行业趋势，具体分析如下：\r\n\r\n\r\n### **一、研发投入与技术布局：全栈自主化构建长期壁垒**\r\n1. **研发投入持续高企，聚焦核心技术突破**  \r\n   公司近三年研发投入复合增长率达18.7%，2024年研发费用达17.5亿元（占营收12.3%），显著高于行业平均水平（信创硬件企业研发费用率约8.5%）。重点投入方向包括：  \r\n   - **芯片与整机技术**：基于飞腾5000C芯片的擎天V5系列服务器实现算力提升100%，能耗降低8%，已适配麒麟、统信等操作系统，在金融信创领域市占率达22%（2024年数据）。  \r\n   - **AI算力生态**：推出国产化AI训推一体机，支持180B大模型微调，与政务、金融客户合作落地智能客服、风控模型等场景，2024年AI相关业务收入同比增长45%。  \r\n   - **专利储备**：截至2024年底，累计申请专利3278项，其中发明专利占比63%，自主安全计算机相关专利数量位居行业前三。\r\n\r\n2. **技术转化效率边际改善**  \r\n   尽管2024年净利润亏损14.79亿元，但研发投入对营收的拉动作用逐步显现：信创整机出货量从2022年的85万台增至2024年的120万台，年化增长率19.5%；AI服务器在2024年Q4实现规模化交付，单季度订单金额达3.2亿元。\r\n\r\n\r\n### **二、市场潜力：信创政策加码与新兴领域拓展**\r\n1. **信创行业需求爆发，订单持续放量**  \r\n   根据《2025年信创产业发展白皮书》，2025年党政机关信创PC替代率将达70%，金融行业核心系统国产化率目标提升至35%。公司作为信创硬件龙头，2024年中标某国有银行2.8亿元信创终端采购项目，并入围多地政务云平台建设，预计2025-2027年信创相关营收将以20%-25%的复合增速增长。\r\n\r\n2. **新兴业务成为第二增长曲线**  \r\n   - **海洋信息化**：自主研发的光纤水听器系统在南海某监测项目中实现国产化替代，2024年该业务收入同比增长120%，毛利率达42%（高于传统整机业务15-20个百分点）。  \r\n   - **特种计算**：切入民航电子政务市场，为某航空公司定制国产化票务系统，预计2026年该领域收入占比将突破10%。  \r\n   - **ODM业务**：与戴尔、惠普合作生产商用PC，2024年上半年收入占比39.7%，提供稳定现金流支撑研发投入。\r\n\r\n\r\n### **三、财务表现与增长预期：短期承压，长期向好**\r\n1. **2024年财务数据解析**  \r\n   - 营收142.03亿元（+5.83%），主要受信创订单交付节奏影响；  \r\n   - 毛利率15.35%，同比下降2.1个百分点，系AI服务器低价竞标及原材料成本上涨所致；  \r\n   - 经营活动现金流净额+3.2亿元，较2023年（-1.8亿元）显著改善，显示订单回款能力增强。\r\n\r\n2. **机构盈利预测与估值**  \r\n   据Wind一致预测，2025-2027年公司营收将分别达168.5亿元、198.7亿元、235.4亿元（CAGR 17.2%），净利润将于2026年转正至4.01亿元，2027年PE估值约35倍（低于信创硬件行业平均42倍），存在估值修复空间。\r\n\r\n\r\n### **四、竞争格局与风险挑战**\r\n1. **行业竞争态势**  \r\n   信创硬件领域呈现“双龙头”格局：华为（鲲鹏+昇腾生态）2024年信创服务器市占率约35%，中国长城约28%。公司与华为的核心差异在于：  \r\n   - **芯片路线**：依赖飞腾（ARM架构），华为自研鲲鹏（自研架构），短期面临技术生态壁垒；  \r\n   - **成本控制**：通过规模化生产降低整机成本，2024年信创PC单台成本较华为低12%-15%。\r\n\r\n2. **潜在风险点**  \r\n   - **技术依赖风险**：飞腾芯片供应稳定性需关注，若上游产能受限可能影响交付；  \r\n   - **研发投入回报周期**：AI GPU等前沿技术研发需持续投入，短期或拖累利润；  \r\n   - **政策落地不及预期**：若信创采购节奏放缓，2025年营收增速可能下修至10%以下。\r\n\r\n\r\n### **五、结论：市场潜力明确，增长动能取决于技术转化**\r\n中国长城的产品与服务在信创政策驱动下具备坚实市场基础，研发投入的持续加码已形成“芯片-整机-系统”的全栈能力，AI算力与新兴业务的突破为营收增长打开空间。未来3-5年，若信创订单按预期释放、AI产品毛利率提升至25%以上，公司营收有望实现15%-20%的年均增长，2027年营收规模或突破230亿元。但需密切关注技术自主化进程与行业竞争格局变化，建议跟踪2025年Q2信创招标进度及AI业务订单情况。',
        simpleAnswerContent: '中国长城（000066）作为信创领域核心...',
        answerUser: 'weijun',
        answerTime: '2025-06-19 17:04:35',
        score: null,
        commentContent: null,
        simpleCommentContent: null,
        commentUser: null,
        commentTime: null,
        status: '2',
      },
    ],
  },
  {
    questionId: 6,
    interCode: '000001.XSHE',
    secCode: '000001',
    secName: '平安银行',
    questionContent: '滔之一问',
    answerDirection: null,
    questionUser: 'admin',
    questionTime: '2025-06-20 11:13:30',
    tag: '行业问题',
    status: '1',
    answerList: [],
  },
  {
    questionId: 5,
    interCode: '000001.XSHE',
    secCode: '000001',
    secName: '平安银行',
    questionContent: '基本面问',
    answerDirection: null,
    questionUser: 'admin',
    questionTime: '2025-06-20 11:13:18',
    tag: '基本面',
    status: '1',
    answerList: [],
  },
];
